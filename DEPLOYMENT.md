# Деплой фронтенда на GitHub Pages

## Структура проекта

```
frontend/
├── index.html          # Главная страница SPA
├── 404.html            # Страница для SPA роутинга
├── manifest.json       # PWA манифест
├── sw.js              # Service Worker
├── DEPLOYMENT.md      # Эта документация
└── [другие файлы...]
```

## Настройка GitHub Pages

### 1. Создание репозитория
1. Создайте новый репозиторий на GitHub
2. Загрузите все файлы из папки `frontend/` в корень репозитория

### 2. Настройка GitHub Pages
1. Перейдите в Settings → Pages
2. В разделе "Source" выберите "Deploy from a branch"
3. Выберите ветку `main` и папку `/ (root)`
4. Сохраните настройки

### 3. Доменное имя (опционально)
Если нужно использовать кастомный домен:
1. В настройках Pages укажите свой домен
2. Добавьте CNAME файл в корень репозитория

## Особенности SPA роутинга

GitHub Pages не поддерживает серверные конфигурации, поэтому для SPA используется следующий подход:

### Механизм роутинга:
1. При заходе на несуществующий маршрут GitHub Pages показывает `404.html`
2. `404.html` перенаправляет на `index.html` через JavaScript
3. `index.html` восстанавливает исходный маршрут из `sessionStorage`

### Поддерживаемые маршруты:
- `/` - главная страница
- `/product/{slug}` - страница товара
- `/profile` - профиль пользователя
- `/about` - о магазине

## API Endpoints

Фронтенд настроен на работу с бэкендом на Vercel:
- **Бэкенд URL**: `https://ikeber-pricelist.vercel.app`
- **API Endpoints**: 
  - `/api/products` - получение товаров
  - `/api/categories` - получение категорий
  - `/api/search-suggestions` - поисковые подсказки
  - `/api/submit-order` - оформление заказа
  - `/api/system` - системные запросы

## PWA Функциональность

Приложение поддерживает:
- Установку как PWA
- Офлайн-работу через Service Worker
- Push-уведомления
- Быструю загрузку

## Обновление контента

Для обновления контента:
1. Внесите изменения в файлы фронтенда
2. Загрузите обновленные файлы в репозиторий
3. GitHub Pages автоматически пересоберет сайт

## Локальная разработка

Для локальной разработки:
```bash
# Запуск через локальный сервер
npx serve frontend/
# или
python -m http.server 8000 --directory frontend/
```

## Проблемы и решения

### Проблема: Маршруты не работают после обновления страницы
**Решение**: Используется механизм с `404.html` и `sessionStorage`

### Проблема: API запросы блокируются CORS
**Решение**: Бэкенд настроен на разрешение CORS запросов с любого источника

### Проблема: Статические файлы не кешируются
**Решение**: Service Worker кеширует статические ресурсы

## Мониторинг

После деплоя проверьте:
- [ ] Главная страница загружается
- [ ] Товары отображаются
- [ ] Поиск работает
- [ ] Корзина функционирует
- [ ] SPA роутинг работает
- [ ] PWA устанавливается